!function(t,o,n){MoneyAd=function(o){this.config=t.extend({adSoldId:null,adId:null,mode:"live",ajaxUrl:"",nonce:"",showAfter:1,type:"image",complexity:"simple",timer:10,action:"close",goToLink:"",shadow:"on",responsive:"off",position:"center",width:"auto",height:"auto",top:"auto",bottom:"auto",left:"auto",right:"auto"},o),this.getAdOutput()},MoneyAd.prototype={getAdOutput:function(){var o=this;t.ajax({url:o.config.ajaxUrl,type:"post",data:{action:"money_front_ad_output",nonce:o.config.nonce,ad_id:o.config.adId},success:function(t){return t.hasOwnProperty("errors")?!1:void("front"===o.config.mode?setTimeout(function(){o.displayAd.call(o,t.output),o.updateStatsAfterDisplay.call(o)},1e3*parseFloat(o.config.showAfter)):"preview"===o.config.mode&&o.displayAd.call(o,t.output))}})},displayAd:function(o){var n=this;t("body").append(n.setShadow(o)),n.ad=t("#money-ad-"+n.config.adId),setTimeout(function(){n.setSize(),n.setPosition(),n.setTimer(),n.setEvents()},20)},updateStatsAfterDisplay:function(){var o=this;t.ajax({url:o.config.ajaxUrl,type:"post",data:{action:"money_front_ad_update_stats",nonce:o.config.nonce,ad_id:o.config.adSoldId}})},setShadow:function(t){return t="on"===this.config.shadow?'<div class="money-ad-shadow fullSizeShadow-ad">'+t+"</div>":'<div class="money-ad-shadow noShadow-ad">'+t+"</div>"},setSize:function(){"video"===this.config.type&&"auto"===this.config.width?(this.config.width="700px",this.config.height="auto"):"audio"===this.config.type&&"auto"===this.config.width&&(this.config.width="300px",this.config.height="auto"),this.ad.css({width:this.config.width,height:this.config.height})},setPosition:function(){var t=this;"center"==t.config.position?t.ad.css({top:"50%",left:"50%",bottom:"auto",right:"auto","margin-left":"-"+parseInt(t.ad.width())/2+"px","margin-top":"-"+parseInt(t.ad.height())/2+"px"}):t.ad.css({top:t.config.top,left:t.config.left,right:t.config.right,bottom:t.config.bottom,"margin-left":"","margin-top":""})},setTimer:function(){if("simple"===this.config.complexity)return!1;var o=this,n=this.config.timer,i=setInterval(function(){0==n?(clearInterval(i),o.ad.trigger("mn:timerEnded")):(n-=1,t(".money-ad-timer span",o.ad).text(n))},1e3)},setEvents:function(){var i=this;i.ad.on("mn:timerEnded",function(){return"simple"==i.config.complexity?!1:("close"!=i.config.action&&(window.location=i.config.goToLink),void t(".money-ad-timer",i.ad).replaceWith('<button class="money-ad-close">x</button>'))}),o.on("click",".money-ad-close",function(t){t.preventDefault();var o=i.ad.parent();o.fadeOut(150,function(){o.remove()})});var e,a=i.ad.width();n.resize(function(){clearTimeout(e),e=setTimeout(function(){"on"===i.config.responsive&&a>n.width()?i.responsive(!0):n.width()>a&&i.responsive(!1)},40)}).resize(),"front"===i.config.mode&&t(".money-ad-url, .money-ad-label a",i.ad).click(function(){t.ajax({url:i.config.ajaxUrl,type:"post",data:{action:"money_front_ad_update_clicks_stat",nonce:i.config.nonce,ad_id:i.config.adSoldId}})})},responsive:function(t){t?this.ad.addClass("responsive-ad"):this.ad.removeClass("responsive-ad"),this.setPosition()}};var i;"undefined"!=typeof mnObjAd&&(i=new MoneyAd(mnObjAd)),o.on("click",".mnad",function(o){o.preventDefault();var n=t(this),e=n.attr("id").split("-")[1],a=n.text();n.text(a+" ..."),t.ajax({url:mnObjFront.ajaxurl,type:"post",data:{action:"money_front_get_ad_js_params",nonce:mnObjFront.nonce,ad_id:e},success:function(o){return o.hasOwnProperty("errors")?!1:(o.hasOwnProperty("actionLink")?window.location=o.actionLink:"undefined"!=typeof i&&t(".money-ad-shadow").remove(),i=new MoneyAd(o.adParams),void n.text(a))}})})}(jQuery,jQuery(document),jQuery(window));